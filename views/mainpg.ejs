<!DOCTYPE html>
<html>

<head>
    <title>Display Frame</title>


    <header style="background-color:#4cbb17;" class="header-area header-sticky">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav" style="display: flex;">
                        <!-- ***** Logo Start ***** -->
                        <a href="http://localhost:4000/indexpg" class="logo">
                            <h1>RoadSenseAi</h1>
                        </a>
                        <!-- ***** Logo End ***** -->
                        <!-- ***** Menu Start ***** -->
                        <ul class="nav">
                            <!-- <li><a href="index.html" class="active">Home</a></li> -->
                            <link
                                href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
                                rel="stylesheet" />

                            <title>Villa Agency TemplateMo - Contact Page</title>

                            <!-- Bootstrap core CSS -->
                            <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />



                            <li><a href="http://localhost:4000/display_frames1">No Helmet</a></li>
                            <li><a href="http://localhost:4000/display_frames2">Wrongside</a></li>
                            <li><a href="http://localhost:4000/display_frames3">Traffic light Breaking</a></li>
                            <li><a href="http://localhost:4000/contactus">Contact</a></li>

                            <link rel="stylesheet" href="./assets/css/fontawesome.css" />
                            <link rel="stylesheet" href="./assets/css/templatemo-villa-agency.css" />
                            <link rel="stylesheet" href="./assets/css/owl.css" />
                            <link rel="stylesheet" href="./assets/css/animate.css" />
                            <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />

                            <script src="./vendor/jquery/jquery.min.js"></script>
                            <script src="./vendor/bootstrap/js/bootstrap.min.js"></script>
                            <script src="./assets/js/isotope.min.js"></script>
                            <script src="./assets/js/owl-carousel.js"></script>
                            <script src="./assets/js/counter.js"></script>
                            <script src="./assets/js/custom.js"></script>

                            <!--  <li>
                      <a href="#"
                        ><i class="fa fa-calendar"></i> Schedule a visit</a
                      >
                    </li> -->
                        </ul>
                        <a class="menu-trigger">
                            <span>Menu</span>
                        </a>
                        <!-- ***** Menu End ***** -->
                    </nav>
                </div>
            </div>
        </div>
    </header>


</head>

<body>



    <style>
        body {
            align-items: center;
            align-content: center;
            align-self: center;
            text-align: center;
        }

        img {
            max-height: 40%;
            max-width: 50%;
        }
    </style>



    <img class="livevid" id="webcam-feed" src="data:image/jpeg;base64,<%= myFrame %>" />
    <!-- <form action="/receive_frame" method="get">
                <button class="del_button" type="submit" >Delete Frame</button>
            </form> -->
    <!-- <button class="button" type="submit" onclick="updateVariableValue()">Go live</button> -->


    <script>
        console.log("inside js file");


        var theImg = document.getElementById("webcam-feed");

        function updateVariableValue() {
            // AJAX request to get updated variable value
            fetch('/send-frame1', { method: 'POST' })
                .then(response => response.text())
                .then(data => {
                    console.log("it shld get updated now ");
                    //console.log(data.slice(-30));

                    var newFrame = "data:image/jpeg;base64," + data.toString();
                    theImg.src = newFrame;
                });
        }

        //console.log(theImg.src.slice(-30));



        // Update value initially and then set an interval to update every 0.5 seconds
        updateVariableValue();
        setInterval(updateVariableValue, 100); //0.10 secs 

    </script>

</body>

</html>